<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jp.co.internous.team2512.model.mapper.MstProductMapper">

	<select id="findByCategoryAndProductName" resultType="jp.co.internous.team2512.model.domain.MstProduct">
		SELECT * 
		FROM mst_product 
		WHERE category_id = #{category} 
		<if test="keywords != null and keywords.length > 0">
            AND (
                <foreach collection="keywords" item="kw" separator=" OR ">
                    product_name 
                    LIKE CONCAT('%', #{kw}, '%')
                </foreach>
            )
        </if>
	</select>
	
	<select id="findByProductName" resultType="jp.co.internous.team2512.model.domain.MstProduct">
		SELECT * 
		FROM mst_product
		<where>
            <if test="keywords != null and keywords.length > 0">
                <foreach collection="keywords" item="kw" separator=" OR ">
                    product_name 
                    LIKE CONCAT('%', #{kw}, '%')
                </foreach>
            </if>
        </where>
	</select>
	
</mapper>